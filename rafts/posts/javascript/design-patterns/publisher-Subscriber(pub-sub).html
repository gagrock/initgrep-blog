<!doctype html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="msvalidate.01" content="028DD45A8309143DDE8DAFDD41945FE6" />
<link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png"/>
<meta name="theme-color" content="#000000">
<title>Publisher-Subscriber(pub-Sub) pattern in Javascript - www.initgrep.com  </title>
<meta itemprop="description" name="description" content="Publisher Subscriber pattern is the loosely coupled extension of Observer pattern." />
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Publisher-Subscriber(pub-Sub) pattern in Javascript">
<meta property="og:url" content="http://localhost:4000/posts/javascript/design-patterns/publisher-Subscriber(pub-sub)">
<meta property="og:image" content="http://localhost:4000/assets/images/pub-sub.jpg" />
<meta property="og:site_name" content="www.initgrep.com">
<meta property="article:publisher" content="http://www.facebook.com/initgrep" />
<meta property="article:author" content="https://www.facebook.com/irshsheikh" />
<meta property="article:published_time" content="2017-12-31 00:00:00 +0530" />
<meta property="og:description" content="Publisher Subscriber pattern is the loosely coupled extension of Observer pattern.">
<link rel="canonical" href="http://localhost:4000/posts/javascript/design-patterns/publisher-Subscriber(pub-sub)" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:site" content="@initgrep" />
<meta name="twitter:creator" content="@imshykh">
<meta name="twitter:title" content="Publisher-Subscriber(pub-Sub) pattern in Javascript - www.initgrep.com  ">
<meta name="twitter:description" content="Publisher Subscriber pattern is the loosely coupled extension of Observer pattern.">
<meta name="twitter:image" content="http://localhost:4000/assets/images/pub-sub.jpg">

<meta name="google-site-verification" content="" />

<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Publisher-Subscriber(pub-Sub) pattern in Javascript - www.initgrep.com  ",
"image": "http://localhost:4000/assets/images/pub-sub.jpg",
"datePublished": "2017-12-31 00:00:00 +0530",
"description": "Publisher Subscriber pattern is the loosely coupled extension of Observer pattern.",
"publisher": {"@type": "Organization",
"logo": {"@type": "ImageObject",
"url": "http://localhost:4000/assets/images/pub-sub.jpg",
"url": "http://localhost:4000/posts/javascript/design-patterns/publisher-Subscriber(pub-sub)"}
</script>



<!--[if lt IE 9]>
<script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link type="text/css" rel="stylesheet" href="/assets/css/main.css"  media="screen,projection"/>
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#edeff5",
      "text": "#333"
    },
    "button": {
      "background": "#333333"
    }
  },
  "position": "bottom-right",
  "content": {
    "message": "Hey there, Thank you for visiting by...\n\n\n <b>initgrep.com</b> uses cookies to ensure you get the best experience.",
    "link": "check our privacy policy",
    "href": "https://www.freeprivacypolicy.com/privacy/view/45d4583efa7b94a6561a193611ee4104"
  }
})});
</script>
</head>
<body> 
 <!--- nav content -->   

<div class="navbar-fixed" id="top" >
    <nav class=" white lighten-2 " id ="check_nav" role="navigation" style=" box-shadow: 0 0 1px 0 #DEDADA;">
    <div class="nav-wrapper">

      <a id="logo-container" href="/" 
      class="brand-logo  
black-text

 ">initgrep</a>
      <ul class=" nav_menu right hide-on-med-and-down">
       <li><a class="black-text" id="nav_search"><i class="material-icons">search</i></a></li>
      	<li><a class="pt-sans-bold 
black-text

" href="/about">About</a></li>
         <li><a class=" pt-sans-bold 
black-text

" href="/posts" >Posts<i class="material-icons right">more_vert</i></a></li>

      </ul>

      <!--side menu -->
      <ul id="slide-out" class="side-nav ">
        
        <li>
              <div class="background 

black
">
                  <a href="/"><span class="white-text  pacifo-L">initgrep</span></a>
                  <a id="sidenav_search" class="btn-floating btn-large waves-effect waves-light blue-grey"><i class="material-icons">search</i></a>
              </div> 
        </li>
      <li style="margin-top: 1rem; height: 20px;"></li>
        
         <li>
          <a class=" 
black-text

 " href="/posts/">
            <i class=" material-icons receipt"></i>Posts
          </a>
        </li>
        <li><div class="divider"></div></li>
        <li>
          <a class=" 
black-text

" href="/about">
            <i class=" material-icons android">android</i>About
          </a>
        </li>

      </ul>
      <a href="#" data-activates="slide-out" class=" side_menu button-collapse 
black-text

 show-on-large"><i class="material-icons">sort</i></a>
    </div>
    
  </nav>
</div>


<div class="section ">

  <div class="row ">
    <div class="col l4 s12 m8 xl4 offset-m2 hide-on-med-and-down">
       

<div class="section toc-wrapper">

     
    <h1 class="toc-heading pt-sans-bold"> Table of Contents </h1>
    <dl class="toc">
                   
        <dt>
            
            <a class="black-text pt-sans" href="/posts/javascript/design-patterns/observer-pattern"> Observer pattern in Javascript
            </a>
            
        </dt>
             
        <dt>
            
            <a class="teal-text text-darken-3 pt-sans " href="/posts/javascript/design-patterns/publisher-Subscriber(pub-sub)">
                Publisher-Subscriber(pub-Sub) pattern in Javascript
            </a>
            
        </dt>
             
        <dt>
            
            <a class="black-text pt-sans" href="/posts/javascript/design-patterns/modular-design-pattern"> Modular design pattern in JavaScript
            </a>
            
        </dt>
                                          
    </dl>
</div>

      
    </div>
    <div class="col s12 m8 l8 xl8 offset-m2 ">

      <!-- author -->
      <div class="row" style="margin-bottom: 0px;">
        <div class="col s12 m10 l0 xl12  ">
          <div class="row " style="margin-bottom: 0px;">
            <div class="col s12 m8 l6 xl6 ">
              <div class="row">
                <div class="col s4 m4 l3 xl2  ">
                  








  <img class="user " src="/assets/images/pp.jpeg">





                </div>
                <div class="col s6 m8 l8 xl10  margin-top-1 ">
                  <a href="/about/sheikh irshad" class="grey-text  pt-sans-bold author" style="display: block; text-transform: capitalize;">
                    sheikh irshad
                  </a>
                  <a class="grey-text pt-sans datetime ">December 31, 2017</a>
                </div>
              </div>
            </div>
            <div class="col s12 m4 l6 xl2 hide-on-small-only  ">
              <div class="col s12 m12 l12 right  margin-top-2 ">
                <span class="grey-text right pt-sans-bold readtime">
                  

  6 mins
 read
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- author -->

      <div class="row content" style="padding-top: 0px;">
        <div class="col s12 m12 l10 xl8 ">
          <h2 class="valign post-head center black-text pt-sans-bold">Publisher-Subscriber(pub-Sub) pattern in Javascript</h2>
        </div>
        <div class=" content-text col s12 m12 l10 xl8 "><p>Publisher Subscriber(Pub-Sub) pattern goes further ahead by decoupling the registration process of subscribers and publishers compared to <a href="/posts/javascript/design-patterns/observer-pattern">Observer pattern</a> . It introduces a message broker or Event Bus which acts as a bridge between a publisher(Subject) and various Subscribers. The topics are published by Subject for different kinds of events. The subscriber registers for the respective topics to get notified.</p>

<p>Let me try an analogy for it:</p>
<blockquote>
  <p><em>lets say we have 10 radio stations in a city. Each radio station works at their own frequency
In case we want to listen to radio station(A) with frequency equal to 100, we have to switch to the given frequency. 
Radio station(A) publishes its episodes at the frequency(topic/event) 100. As a subscriber, if we want to listen to it, we have to listen at this frequency(topic/event)</em></p>

</blockquote>

<p><img src="/assets/images/pub-sub.svg" alt="pubsub-analogy" /></p>

<p>Lets implement the publisher subscriber design pattern using Javascript.</p>

<p><strong>Create an Event Bus object which has the registration and publishing API</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	
    <span class="kd">var</span> <span class="nx">EventBus</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">eventTopics</span> <span class="o">=</span>  <span class="p">{};</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="o">=</span>  <span class="kd">function</span> <span class="p">(</span><span class="nx">eventName</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">eventTopics</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="o">||</span> <span class="nx">eventTopics</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">eventTopics</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="p">}</span>
         <span class="nx">eventTopics</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">listener</span><span class="p">);</span>
    <span class="p">};</span>
   
    <span class="k">this</span><span class="p">.</span><span class="nx">emitEventListeners</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">eventName</span> <span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">eventTopics</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="o">||</span> <span class="nx">eventTopics</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
          <span class="nx">eventTopics</span><span class="p">[</span><span class="nx">eventName</span><span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">listener</span><span class="p">(</span> <span class="o">!!</span><span class="nx">params</span> <span class="p">?</span> <span class="nx">params</span> <span class="p">:</span> <span class="p">{}</span> <span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>
    
<span class="p">}</span> <span class="c1">//END EventBus</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">addEventListener</code> and <code class="highlighter-rouge">emitEventListeners</code> functions lets the subscriber and publisher to subscribe and publish on events respectively.</p>

<p><strong>An EventBus can be used as an independent object for registration and publishing such as</strong></p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//initialize the event bus</span>
<span class="kd">var</span> <span class="nx">EventService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventBus</span><span class="p">();</span>
<span class="c1">//add the event listener</span>
<span class="nx">EventService</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'SEND'</span><span class="p">,</span> <span class="nx">callback1</span><span class="p">);</span>
<span class="nx">EventService</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'SEND'</span><span class="p">,</span> <span class="nx">callback2</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">EmailService</span> <span class="o">=</span> <span class="p">{</span>
	<span class="nx">createEmail</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">to</span><span class="p">,</span> <span class="k">from</span><span class="p">,</span> <span class="nx">subject</span><span class="p">){</span>
		<span class="c1">//some business here</span>
		<span class="nx">EventService</span><span class="p">.</span><span class="nx">emitEventListeners</span><span class="p">(</span><span class="s1">'SEND'</span> <span class="p">,</span> <span class="nx">subject</span><span class="p">);</span>
	<span class="p">}</span> 
<span class="p">}</span>
</code></pre></div></div>
<p>we can also let <code class="highlighter-rouge">EmailService extend EventBus</code>. This would make <code class="highlighter-rouge">EmailService</code>
have all the characteristics of <code class="highlighter-rouge">EventBus</code>. Based on the need, we can customize the API also.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//extend the EventBus</span>
<span class="kd">var</span> <span class="nx">EmailService</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">EventBus</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">createEmail</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">to</span><span class="p">,</span> <span class="k">from</span><span class="p">,</span> <span class="nx">subject</span><span class="p">){</span>
      <span class="c1">//send the email</span>
      <span class="c1">//publish/emit the event = order/new </span>
      <span class="k">this</span><span class="p">.</span><span class="nx">emitEventListeners</span><span class="p">(</span><span class="s1">'SEND'</span><span class="p">,</span><span class="nx">Subject</span><span class="p">)</span>
 <span class="p">}</span>
<span class="p">}</span>
<span class="nx">EmailService</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">EventBus</span><span class="p">.</span><span class="nx">prototype</span><span class="p">)</span>
<span class="nx">EmailService</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="kd">constructor</span> <span class="o">=</span> <span class="nx">EmailService</span><span class="p">;</span>
</code></pre></div></div>
<p><em>Note: you can use the new features of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes">ES6</a> classes to extend to the EventBus object</em></p>

<p>Now that we have extended to <code class="highlighter-rouge">EventBus</code>. lets create the <code class="highlighter-rouge">EmailService</code> Object</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="kd">var</span> <span class="nx">emailService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EmailService</span><span class="p">();</span>
	<span class="nx">emailService</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'SEND'</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</code></pre></div></div>
<p>When a business service extends to the EventBus. It makes it representational while keeping the benefits of decoupling and customization.
For example:
	In a different module, if I want to add a listener to <code class="highlighter-rouge">SEND</code> Event . I can do either</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	  <span class="nx">EventBus</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'SEND'</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>
</code></pre></div></div>
<p>or</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	 <span class="nx">EmailService</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'SEND'</span><span class="p">,</span><span class="nx">callback</span><span class="p">)</span>
</code></pre></div></div>

<p>As you notice, in the later case it is very clear to what purpose and service are we subscribing to.</p>

<p>checkout the complete example in the below pen</p>

<p data-height="700" data-theme-id="dark" data-slug-hash="eVZGYO" data-default-tab="js,result" data-user="igagrock" data-embed-version="2" data-pen-title="pub-sub js" class="codepen">See the Pen <a href="https://codepen.io/igagrock/pen/eVZGYO/">pub-sub js</a> by s://irshad:ahmad.(sheikh) (<a href="https://codepen.io/igagrock">@igagrock</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async="" src="https://production-assets.codepen.io/assets/embed/ei.js"></script>

</div>
      </div>
      <div class="row">
        <div class="col s12 m12 hide-on-large-only">
           

<div class="section toc-bottom-wrapper">

      <!-- | reverse -->
    <h1 class=" pt-sans-bold"> Table of contents - <span>Design-pattern <span></h1>
    <ul class="toc-bottom">
                   
        <li>
            
            <a class="black-text pt-sans-bold" href="/posts/javascript/design-patterns/observer-pattern"> Observer pattern in Javascript
            </a>
            
        </li>
             
        <li>
            
            <a class="teal-text text-darken-3 pt-sans-bold " href="/posts/javascript/design-patterns/publisher-Subscriber(pub-sub)">
                Publisher-Subscriber(pub-Sub) pattern in Javascript
            </a>
            
        </li>
             
        <li>
            
            <a class="black-text pt-sans-bold" href="/posts/javascript/design-patterns/modular-design-pattern"> Modular design pattern in JavaScript
            </a>
            
        </li>
                                          
    </ul>
</div>
        </div>
      </div>
      <!-- comments -->
      <div class="row">
        <div class=" col s12 m12 l10"> <div class="content">
<p>Please feel free to pass your feedback in the comments. Thank you for stopping by.</p>

</div>



<div id="disqus_thread"></div>
<script>
var PAGE_URL = "https://www.initgrep.com//posts/javascript/design-patterns/publisher-Subscriber(pub-sub)"; 
var PAGE_IDENTIFIER = "/posts/javascript/design-patterns/publisher-Subscriber(pub-sub)"
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://www-initgrep-com.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



</div>
      </div>
      <!-- end -->
    </div>

  </div>

 
  <div id="search">
    <div class="section">
       <div class="row">
         <div class="col s12 m12">
          <a class=" close btn-floating waves-effect waves-light btn-small black right ">
              <i class="large material-icons">close</i>
          </a>
         </div>
       </div> 
       <div class="row">
        <div class="input-field col s12 m8 offset-m2">
          <i class="material-icons prefix">search</i>
          <input id="icon_prefix" type="text" class="validate doSearch" >
          <label for="icon_prefix">Search</label>
        </div>
    </div>
  <div class="row  ">
    <div class=" container ">
       <div class="row searchContainer ">
        
      </div>
    </div>

  </div>

   </div> 
</div>

<footer class="page-footer white" id="">
        
    <div class="footer-copyright">
      <div class="container">
       <a class="blue-grey-text " href="/about/sheikh irshad">Made with <i class="material-icons teal-text lighten-4">favorite</i> by me</a>
      </div>
    </div>
  </footer>

 <script type="text/javascript" src="//code.jquery.com/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="/assets/js/materialize.min.js"></script>
<script type="text/javascript" src="/assets/js/properties.js"></script> 
<script type="text/javascript" src="/assets/js/init.js"></script> 
<script type="text/javascript" src="/assets/js/lunr.min.js"></script> 
<script type="text/javascript" src="/assets/js/data.js"></script>       
<script id="dsq-count-scr" src="//www-initgrep-com.disqus.com/count.js" async></script>




</body>
</html>